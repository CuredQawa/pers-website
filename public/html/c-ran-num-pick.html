<!DOCTYPE html>
<html lang="zh">

<head>
    <title>éšæœºæŠ½å·å™¨</title>
    <link rel="shortcut icon" href="../img/ran-num-pick/shortcut.png">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: white;
            margin: 0;
            padding: 0;
            transition: background-color 0.3s, color 0.3s;
        }

        #main {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 300px;
            transition: background-color 0.3s, color 0.3s;
        }

        #result {
            font-size: larger;
            margin-bottom: 10px;
        }

        #history {
            color: grey;
            height: 200px;
            max-height: 200px;
            overflow-y: scroll;
            border: 1px solid lightgrey;
            border-radius: 5px;
            padding: 5px;
        }

        #themeToggle {
            position: fixed;
            right: 50px;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #454545;
            color: white;
            font-size: 20px;
            border: none;
            cursor: pointer;
            outline: none;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        .dark-mode {
            background-color: #333;
            color: white;
        }

        .dark-mode #main {
            background-color: #444;
            border: none;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .dark-mode #history {
            border-color: #555;
            color: #ccc;
        }

        .dark-mode #themeToggle {
            background-color: #FFC107;
        }

        .cant-select{
            user-select: none;
        }

    </style>
</head>

<body>
    <div id="main">
        <label for="startNumber" class="cant-select">èµ·å§‹å·ç ï¼š</label>
        <input type="text" id="startNumber" value="1"><br>

        <label for="endNumber" class="cant-select">æœ«å°¾å·ç ï¼š</label>
        <input type="text" id="endNumber" value="53"><br>

        <label for="quantity" class="cant-select">æŠ½å–æ•°é‡ï¼š</label>
        <input type="text" id="quantity" value="1"><br>

        <label for="allowRepeat" title="ä¸€æ¬¡æ€§æŠ½å–å¤šä¸ªæ—¶å…è®¸é‡å¤" class="cant-select">å…è®¸é‡å¤ï¼š</label>
        <input type="checkbox" id="allowRepeat"><br>

        <button onclick="pickNumbers()">æŠ½å–å·ç </button>
        <button onclick="clearBoard()">æ¸…é™¤é¢æ¿</button>

        <div id="result" class="cant-select"></div>
        <div id="history"></div>
    </div>
    <button id="themeToggle" onclick="toggleTheme()">ğŸŒ™</button>

    <script>
        var historyResults = [];
        var isDarkMode = false;

        function pickNumbers() {
            var startNumber = document.getElementById("startNumber").value;
            var endNumber = document.getElementById("endNumber").value;
            var quantity = document.getElementById("quantity").value;
            var allowRepeat = document.getElementById("allowRepeat").checked;
            var result = document.getElementById("result");

            // æ£€æŸ¥è¾“å…¥æ˜¯å¦ä¸ºæ•°å­—
            if (!isNumeric(startNumber) || !isNumeric(endNumber) || !isNumeric(quantity)) {
                result.innerHTML = "è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—ï¼";
                return;
            }

            startNumber = parseInt(startNumber);
            endNumber = parseInt(endNumber);
            quantity = parseInt(quantity);

            if (startNumber >= endNumber) {
                result.innerHTML = "å°±ä¸èƒ½æ­£æ­£ç»ç»æŠ½å·å—ï¼Œæ‰¾èŒ¬æ˜¯ä¸æ˜¯ï¼Œèµ·å§‹å·æ¯”ç»“æŸå·è¿˜å¤§ï¼Ÿ";
                return;
            }

            if (quantity <= 0) {
                result.innerHTML = "æš‚æ—¶ä¸æ”¯æŒæŠ½è´Ÿæ•°ä¸ªå·ç å“¦qwq";
                return;
            }

            if (allowRepeat == false && (endNumber - startNumber + 1) < quantity) {
                result.innerHTML = "æˆ‘è¯´ï¼Œ " + (endNumber - startNumber + 1) + " ä¸ªé‡Œé¢æŠ½ " + quantity + " ä¸ªè¿˜ä¸å…è®¸é‡å¤ï¼Œå¤©ç‹è€å­æ¥äº†éƒ½æŠ½ä¸å‡ºæ¥";
                return;
            }

            var pickedNumbers = [];
            for (var i = 0; i < quantity; i++) {
                var num = Math.floor(Math.random() * (endNumber - startNumber + 1)) + startNumber;
                if (!allowRepeat && pickedNumbers.includes(num)) {
                    i--; // é‡æ–°æŠ½å–
                } else {
                    pickedNumbers.push(num);
                    historyResults.push(num);
                }
            }

            result.innerHTML = "æŠ½å–ç»“æœï¼š" + pickedNumbers.join(" / ");
            showHistory();
        }

        function isNumeric(value) {
            return !isNaN(parseFloat(value)) && isFinite(value);
        }

        function showHistory() {
            var history = document.getElementById("history");
            history.innerHTML = "å†å²ç»“æœï¼š<br>";
            for (var i = 0; i < historyResults.length; i++) {
                if (i > 0 && i % 7 == 0) {
                    history.innerHTML += "   ";
                }
                history.innerHTML += historyResults[i] + " / ";
                if (i % 7 == 6) {
                    history.innerHTML += "<br>";
                }
            }
        }

        function clearBoard() {
            historyResults = [];
            document.getElementById("result").innerHTML = "";
            showHistory();
        }

        function toggleTheme() {
            var body = document.body;
            var themeToggle = document.getElementById("themeToggle");

            if (!isDarkMode) {
                body.classList.add("dark-mode");
                themeToggle.innerHTML = "â˜€ï¸";
            } else {
                body.classList.remove("dark-mode");
                themeToggle.innerHTML = "ğŸŒ™";
            }

            isDarkMode = !isDarkMode;
        }

        showHistory(); // é»˜è®¤æ˜¾ç¤ºå†å²ç»“æœ
    </script>
</body>

</html>